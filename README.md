# ZhiHuiShu OAuth2 Docs

#### Web Application Flow  
This is a description of the OAuth2 flow .  
ref : <https://developer.github.com/v3/oauth/>

###### 1. Redirect users to request GitHub access
```
GET https://oauth.zhihuishu.com/authorize
```
###### Parameters  
| Name | Type | Description |
| :-- | :-- | :-- |
| response_type | string | REQUIRED. Value MUST be set to "code". |
| client_id | string | REQUIRED. |
| redirect_uri | string | REQUIRED. The URL in your application where users will be sent after authorization. |
| state | string | REQUIRED. An unguessable random string. It is used to protect against cross-site request forgery attacks. |

###### Response  
```
http://your_callback_domain?state=zhs&code=b1294f973c14b3ad9528590e7a891108
```
`code` The authorization code generated by the authorization server. The code's lifetime is 10 minutes.

###### 2. Access Token Request  
```
POST https://oauth.zhihuishu.com/token
```
###### Parameters  
| Name | Type | Description |
| :-- | :-- | :-- |
| grant_type | string | REQUIRED. Value MUST be set to "authorization_code". |
| code | string | REQUIRED. The authorization code received from the authorization server. |
| client_id | string | REQUIRED. |
| redirect_uri | string | REQUIRED. The URL in your application where users will be sent after authorization. |
###### Response  
```
{
    "openid": "c3f116d9d51dec443d9735a86cf150bc8a752287",
    "expires_in": 864000,
    "refresh_token": "feaa3126-708b-3858-810a-f5791bf1508b",
    "access_token": "5e13fb37-9c35-32ab-959b-bb2932e1b5e2"
}
```
`access_token` The access token generated by the authorization server. The token's lifetime is 10 days.

###### 3. Refresh Token Request  
```
POST https://oauth.zhihuishu.com/token
```
###### Parameters  
| Name | Type | Description |
| :-- | :-- | :-- |
| grant_type | string | REQUIRED. Value MUST be set to "refresh_token". |
| refresh_token | string | REQUIRED. The refresh token issued to the client. |
| client_id | string | REQUIRED. |
| redirect_uri | string | REQUIRED. The URL in your application where users will be sent after authorization. |
###### Response  
```
{
    "openid": "c3f116d9d51dec443d9735a86cf150bc8a752287",
    "expires_in": 864000,
    "refresh_token": "a2f0a236-c573-3b22-9bf4-e0487c2f3c8a",
    "access_token": "3c0e98fc-0f91-340a-a686-17bf44df5ff4"
}
```

###### 4. Open User Request  
```
GET/POST https://oauth.zhihuishu.com/openapi/user
```
###### Parameters  
| Name | Type | Description |
| :-- | :-- | :-- |
| access_token | string | REQUIRED. |
###### Response  
```
{
    "realname": "示例用户",
    "avatar": "http://image.zhihuishu.com/zhs_yanfa_150820/ablecommons/cutimage/201610/3d1695c3e37f4378934b93dfe134e9e1.png"
}
```